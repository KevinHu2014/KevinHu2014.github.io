---
layout: post
title: "ViroReact AR 初體驗"
date: 2018-01-05 22:46:31 +0800
comments: true
categories: ReactNative
---

## 前言

最近剛好拿到實驗室新採購的手機，一隻是ASUS 出的Zenfone AR，另一隻是Apple 出的iPhone X。前陣子在React Native Community的社群有survey到viromedia 這家公司做的AR套件，就花了時間研究了一下。

## 正文

會想要玩AR，是因為之前看到Snapchat's 新的AR 功能
<iframe src="https://www.facebook.com/plugins/video.php?href=https%3A%2F%2Fwww.facebook.com%2Fmashableclickclickclick%2Fvideos%2F10155694012049705%2F&show_text=0&width=476" width="476" height="476" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowTransparency="true" allowFullScreen="true"></iframe>

想為公司的專案也加入AR的功能。由於公司的專案是用React Native來開發的，剛好viromedia有推出ViroReact，透過ViroReact可以去呼叫 iOS的 ARkit或是 Android的 ArCore，並透過同一份程式碼的特性來快速在雙平台上開發AR的應用。

接下來就快速帶一下安裝教學

所需設備

AR (iOS)

1. iOS 裝置至少要是 A9 chip 而且 運行 iOS 11

2. OSX 的電腦


AR (Android)

1. 支援ARCore 的手機

<!--more-->


首先要確保你的電腦是有React Native的環境
```
npm install -g react-native-cli
```

再來是安裝 VIROREACT COMMAND LINE INTERFACE
```
npm install -g react-viro-cli
```
接下來是初始一個 VIROREACT的專案
```
react-viro init ViroSample --verbose
```
然後要去下App 商店下載程式

iOS

[Viro Media App](https://itunes.apple.com/us/app/viro-media/id1163100576?mt=8)

Android

[Viro Media App](https://play.google.com/store/apps/details?id=com.viromedia.viromedia)

接著打開剛剛初始化的專案，找到`App.js`，將`API_KEY_HERE`置換成你的API Key。如果還沒有API的話，請去網站[註冊](https://viromedia.com/signup)，註冊完後他會以Email的形式將API key寄給你。

再來是在terminal 啟動 package server
```
npm start
```
這邊要注意的是，不用去執行`react-native run-android`或`react-native run-ios`也不用去Xcode那邊開啟專案。
因為很重要，所以要特別提醒xD，跟以往的套件使用流程非常不一樣。

最後就要來測試我們的`TESTBED APP`了

1. 在你的 iOS或是 Andoroid裝置上開啟 Viro Media App
2. 點擊左側的 Menu，然後點擊"Enter Testbed"
3. 找到你的ngrok url `https://xxxxxx.ngrok.io`，他會顯示在你的npm start 的那個terminal 頁面，輸入後就按GO
4. 會有兩個按鈕可以選，一個是 AR，另一個是 VR。這裡就選擇AR

以上是參考官網 [Quick Start](https://docs.viromedia.com/docs/quick-start)的翻譯和加入一些自己覺得該注意的地方

Hello World 的畫面大概如下

![](https://s10.postimg.org/b6o1a3yu1/IMG_0004.png)

如果有興趣繼續研究的話可以參考[連結](https://docs.viromedia.com/v2.2.0/docs/tutorial-ar)，走完後的final大概如下圖

![](https://s10.postimg.org/7aape1ljd/IMG_0005.png)

![](https://s10.postimg.org/gsf1rt9g9/IMG_0006.png)

## 後記
實驗室的Zenfone AR 並不支援，目前支援ARCore的手機其實相當稀少（Pixel, Pixel XL, Pixel 2, Pixel 2 XL, and Samsung S8.），在未來應該會慢慢支援更多的 Android手機。
針對目前這個問題，Github上有開發者是透過修改Android Library來繞過 ARCore device check（[連結](https://github.com/tomthecarrot/arcore-for-all)），不過我目前試了我手邊的手機都沒有成功，可能真的就要再等等吧！
